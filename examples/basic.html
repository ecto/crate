<!DOCTYPE html>
<html>
<head>
<title>Crate basic example</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="../dist/crate.js"></script>
<script>
var cwd = '/';
var fs = new Crate();

$(document).ready(function () {
  displayFiles();

  $('#files .file').live('click', function (e) {
    var name = $(this).text();

console.log('hi');
    fs.stat(cwd + name, function () {
      console.log(arguments);
    });
  }); 
});

function displayFiles () {
  fs.ls(cwd, function (err, items) {
    if (err) {
      document.write(err);
      return;
    }

    var $files = $('#files');
    $files.html('');
    for (var i in items) {
      var $row = $('<div />').addClass('file').text(items[i]);
      $files.append($row);
    }

    $('#cwd').text(cwd);
  });
}

function createFile () {
  var name = prompt('Filename?');
  fs.touch(cwd + name, function () {
    console.log(arguments);
    displayFiles();
  });
}

function createDirectory () {
  var name = prompt('Directory name?');
  fs.mkdir(cwd + name, function () {
    console.log(arguments);
    displayFiles();
  });
}

function deleteFile () {
  var name = prompt('Filename?');
  fs.rm(cwd + name, function () {
    console.log(arguments);
    displayFiles();
  });
}
</script>
<style>
body {
  font: 16px 'HelveticaNeue', Helvetica, Arial, sans-serif;
  padding: 15px;
}

#cwd {
  padding: 15px 0;
}

#files {
  margin-top: 15px;
  border-top: 1px solid #eee;
}

#files .file {
  padding: 5px;
  border-bottom: 1px solid #eee;
}

#files .file:hover {
  background: #f5f5f5;
  cursor: pointer;
}
</style>
</head>
<body>
  <button onclick="createFile()">create file</button>
  <button onclick="createDirectory()">create directory</button>
  <br />
  <button onclick="deleteFile()">delete file</button>
  <button onclick="deleteDirectory()">delete directory</button>
  <div id="cwd"></div>
  <div id="files"></div>
</body>
</html>
